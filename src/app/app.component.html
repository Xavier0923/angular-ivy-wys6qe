<hello name="{{ name }}"></hello>
<p>Start editing to see some magic happen :)</p>

<table mat-table [dataSource]="dataSource" multiTemplateDataRows>
  <ng-container matColumnDef="videoId">
    <th mat-header-cell *matHeaderCellDef>影片編號</th>
    <td
      mat-cell
      *matCellDef="let element"
      (click)="
        expandedElement = expandedElement === element ? null : element;
        $event.stopPropagation()
      "
    >
      {{ element.videoId }}
    </td>
  </ng-container>
  <ng-container matColumnDef="execStatus">
    <th mat-header-cell *matHeaderCellDef>處理狀態</th>
    <td
      mat-cell
      *matCellDef="let element"
      (click)="
        expandedElement = expandedElement === element ? null : element;
        $event.stopPropagation()
      "
    >
      {{ element.execStatus }}
    </td>
  </ng-container>
  <ng-container matColumnDef="execStartTime">
    <th mat-header-cell *matHeaderCellDef>作業開始時間</th>
    <td
      mat-cell
      *matCellDef="let element"
      (click)="
        expandedElement = expandedElement === element ? null : element;
        $event.stopPropagation()
      "
    >
      {{ element.execStartTime }}
    </td>
  </ng-container>
  <ng-container matColumnDef="execEndTime">
    <th mat-header-cell *matHeaderCellDef>作業結束時間</th>
    <td
      mat-cell
      *matCellDef="let element"
      (click)="
        expandedElement = expandedElement === element ? null : element;
        $event.stopPropagation()
      "
    >
      {{ element.execEndTime }}
    </td>
  </ng-container>
  <ng-container matColumnDef="uncPathname">
    <th mat-header-cell *matHeaderCellDef>路徑</th>
    <td
      mat-cell
      *matCellDef="let element"
      (click)="
        expandedElement = expandedElement === element ? null : element;
        $event.stopPropagation()
      "
    >
      {{ element.uncPathname + element.filePath }}
    </td>
  </ng-container>
  <ng-container matColumnDef="expand">
    <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        aria-label="expand row"
        (click)="testFunc($event, element)"
      >
        <mat-icon *ngIf="expandedElement !== element"
          >keyboard_arrow_down</mat-icon
        >
        <mat-icon *ngIf="expandedElement === element"
          >keyboard_arrow_up</mat-icon
        >
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="expandedDetail">
    <td
      style="padding: 0;"
      mat-cell
      *matCellDef="let element"
      [attr.colspan]="columnsToDisplayWithExpand.length"
    >
      <div
        class="example-element-detail"
        [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'"
      >
        <div class="example-element-diagram">
          <mat-card *ngFor="let item of element.archiveLogs">
            <!-- <mat-grid-list cols="2" gutterSize="5" rowHeight="6:1">
              <mat-grid-tile style="border: 1px solid #fff;border-radius:15px;"
                ><p>作業內容 :</p>
                <p style="margin-right:10px;">
                  {{ item.taskDesc }}
                </p></mat-grid-tile
              >
              <mat-grid-tile style="border: 1px solid #fff;border-radius:15px;"
                >作業時間 : {{ item.execStartTime }} ~
                {{ item.execEndTime }}</mat-grid-tile
              >
              <mat-grid-tile style="border: 1px solid #fff;border-radius:15px;"
                >執行狀態 :
                <mat-icon
                  *ngIf="item.execStatus === 'complete'"
                  style="color:green;"
                  >done</mat-icon
                >
                <mat-icon *ngIf="item.execStatus === 'fail'" style="color:red;"
                  >close</mat-icon
                >
              </mat-grid-tile>
              <mat-grid-tile
                style="border: 1px solid #fff;border-radius:15px;"
                *ngIf="item.execStatus === 'fail'"
                style="display:block;word-break: break-word;width:100%;"
                >錯誤訊息 : {{ item.errorMessage }}</mat-grid-tile
              >
            </mat-grid-list> -->
          </mat-card>

          <div *ngFor="let item of element.archiveLogs">
            <p>作業內容 : {{ item.taskDesc }}</p>
            <p>作業時間 : {{ item.execStartTime }} ~ {{ item.execEndTime }}</p>
            <p style="display:flex;align-item: center;">
              執行狀態 :
              <mat-icon
                *ngIf="item.execStatus === 'complete'"
                style="color:green;"
                >done</mat-icon
              >
              <mat-icon *ngIf="item.execStatus === 'fail'" style="color:red;"
                >close</mat-icon
              >
            </p>
            <p
              *ngIf="item.execStatus === 'fail'"
              style="display:block;word-break: break-word;width:100%;"
            >
              錯誤訊息 : {{ item.errorMessage }}
            </p>
            <mat-divider></mat-divider>
          </div>
        </div>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
  <tr mat-row *matRowDef="let row; columns: columnsToDisplayWithExpand"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['expandedDetail']"
    class="example-detail-row"
  ></tr>
</table>
<mat-paginator
  [pageSizeOptions]="[5, 10, 25, 100]"
  aria-label="Select page of users"
></mat-paginator>
<mat-chip-listbox>
  <mat-chip style="background:green;height:20px;"
    ><mat-icon matChipAvatar>check</mat-icon>Success</mat-chip
  >
  <mat-chip style="background:blue;height:20px;"
    ><mat-icon matChipAvatar>check</mat-icon>Wait</mat-chip
  >
  <mat-chip style="background:red;height:20px;"
    ><mat-icon matChipAvatar>check</mat-icon>Fail</mat-chip
  >
  <mat-chip style="background:orange;height:20px;"
    ><mat-icon matChipAvatar>check</mat-icon>Process</mat-chip
  >
  <mat-chip style="background:gray;height:20px;"
    ><mat-icon matChipAvatar>check</mat-icon>Pause</mat-chip
  >
</mat-chip-listbox>
